<?php

/**
 * Implements hook_preprocess().
 */
function egam_preprocess_responsive_image_formatter(&$variables) {
	/* @var \Drupal\image\Plugin\Field\FieldType\ImageItem $image */
	$image = $variables['item'];
	$width = $image->get('width')->getValue();
	$height = $image->get('height')->getValue();

	if ($height > 1080) {
		$ratio = $width / $height;
		$height = 1080;
		$width = $width * $ratio;
	}

	$variables['image_width'] = $width;
	$variables['image_height'] = $height;
}